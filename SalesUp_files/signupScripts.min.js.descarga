"use strict";function enviaErrorAnaliycs(arrDatos){window._suTr&&(arrDatos.push("++++ _suTr ++++"),arrDatos.push("id: "+_suTr.id));var strError=arrDatos.join(" | ");ga("send","pageview"),ga("send","event",{eventCategory:"errorDemo",eventAction:"alertaError",eventLabel:strError,eventValue:1}),console.info("enviaErrorAnaliycs"),console.warn(strError)}window.onerror=function(errorMsg,url,lineNumber,column,errorObj){var nav=window.navigator,appCodeName=nav.appCodeName?nav.appCodeName:"no soportado",userAgent=nav.userAgent?nav.userAgent:"desconocido",donde=document.location.href,path=(document.referrer,document.location.pathname),fecha=(self.parent.document.location.pathname,new Date),arrDatos=[];arrDatos.push("++++ ERROR ++++"),arrDatos.push("error: "+errorMsg),arrDatos.push("script: "),arrDatos.push("line: "+lineNumber),arrDatos.push("column: "+column),arrDatos.push("stackTrace: "+errorObj),arrDatos.push("++++ INFO ++++"),arrDatos.push("fecha: "+fecha),arrDatos.push("appCodeName: "+appCodeName),arrDatos.push("userAgent: "+userAgent),arrDatos.push("donde: "+donde),arrDatos.push("path: "+path),arrDatos.push("referrer: "),window.ga?enviaErrorAnaliycs(arrDatos):setTimeout(function(){enviaErrorAnaliycs(arrDatos)},3e3)};var objPopupSignup={funcion:3,p1Append:"body",p2Append:"configCuenta",externalDivId:"FormularioPruebaloDinamico",externalDivClass:"",tituloP1:"Crea tu cuenta",tituloP2:"Platícanos sobre tu empresa",parrafoP1:"Pruébalo por 30 días gratis. No necesitas instalar ningún software",parrafoP2:"Ayúdanos a mejorar tu experiencia con tu CRM",idForm:"popupFormSignUp",formClass:"fullscreenFormBox",idDivCaja:"",classDivCaja:"",divErrorClass:"text-center fullscreenForm-errorBox",errorClass:"fullscreenForm-error text-inverse",camposVista1:[{input:!0,span:{text:'<i class="fa fa-user" aria-hidden="true"></i> Tu nombre completo'},atributos:{name:"NOMBRE",type:"text",tipo:"nombre"},error:"Ingresa tu nombre"},{input:!0,span:{text:'<i class="fa fa-envelope" aria-hidden="true"></i> Tu correo electrónico'},atributos:{name:"EMAIL",type:"text",tipo:"email"},error:"Ingresa un email válido"},{input:!0,span:{text:'<i class="fa fa-lock" aria-hidden="true"></i> Crea tu contraseña'},atributos:{name:"CONTRASENIA",type:"password",tipo:""},error:"Ingresa una contraseña"}],camposVista2:[{input:!0,span:{text:"Nombre de tu empresa"},atributos:{name:"EMPRESA",type:"text",tipo:""},error:"Ingresa tu empresa"},{input:!1,span:{text:"¿Cuál es tu puesto?"},atributos:{name:"PUESTO",tipo:"select",options:[{value:"Asistente/Auxiliar",texto:"Asistente/Auxiliar"},{value:"Coach/Consultor",texto:"Coach/Consultor"},{value:"Contador",texto:"Contador"},{value:"Coordinador/Supervisor",texto:"Coordinador/Supervisor"},{value:"Director",texto:"Director"},{value:"Ejecutivo de Ventas",texto:"Ejecutivo de Ventas"},{value:"Estudiante",texto:"Estudiante"},{value:"Gerente",texto:"Gerente"},{value:"IT Sistemas",texto:"IT Sistemas"},{value:"Marketing",texto:"Marketing"},{value:"Socio/Dueño",texto:"Socio/Dueño"},{value:"Otro",texto:"Otro"}]},error:"Ingresa tu puesto"},{input:!1,span:{text:"¿Cuantos colaboradores hay en tu empresa?"},atributos:{name:"VENDEDORES",tipo:"select",options:[{value:"Autónomo",texto:"Autónomo"},{value:"1 vendedor",texto:"1 vendedor"},{value:"2-3 vendedores",texto:"2-3 vendedores"},{value:"4-9 vendedores",texto:"4-9 vendedores"},{value:"10-39 vendedores",texto:"10-39 vendedores"},{value:"40-100 vendedores",texto:"40-100 vendedores"},{value:"Más de 100 vendedores",texto:"Más de 100 vendedores"}]},error:"Ingresa número de vendedores"},{input:!1,span:{text:"País"},atributos:{name:"PAIS",tipo:"select"},error:"Elige un país"},{input:!1,span:{text:"Estados"},atributos:{name:"ESTADO",tipo:"select"},error:"Elige un estado"},{input:!0,span:{text:"Tu teléfono"},atributos:{name:"TELEFONO",type:"tel",tipo:"telefono"},error:"Ingresa un número válido"}],boton:{id:"botonFormPopup",text:"¡Regístrate!",class:"btn btn-block btn-lg btn-primary",textoFinal:'Comenzar<i class="fa fa-spinner fa-pulse fa-fw"></i>'}};String.prototype.hashCode=function(){var char,hash=0;if(0===this.length)return hash;for(var i=0;i<this.length;i++)char=this.charCodeAt(i),hash=(hash<<5)-hash+char,hash&=hash;return hash},String.prototype.capitalize=function(){if(this){for(var palabras=this.split(" "),cadena="",i=0;i<palabras.length;i++)cadena+=fn.primeraMayus(palabras[i]),i+1<palabras.length&&(cadena+=" ");return cadena}return""};var fn={};fn.primeraMayus=function(string){return string&&"string"==typeof string?(string=string.toLowerCase(),string[0].toUpperCase()+string.slice(1)):""},fn.request=function(url,method,configObj){method=method||"GET",configObj=configObj||{};var conf=Object.assign(configObj,{method:method,url:url});return $.ajax(conf)},fn.CreateUpdateReq=function(url,method,data,configObj){var fm=new FormData,dataStr=JSON.stringify(data);configObj=configObj||{},fm.append("p",fn.strEncode({str:dataStr,encode:!0}));var config=Object.assign(configObj,{data:fm,processData:!1,contentType:!1});return fn.request(url,method,config)},fn.postReq=function(url,data,configObj){return fn.CreateUpdateReq(url,"POST",data,configObj)},fn.putReq=function(url,data,configObj){return fn.CreateUpdateReq(url,"PUT",data,configObj)},fn.depurarTelefono=function(numero){for(var regExSeparaNumeros=/\d+/g,result=[],telefono="";null!==(result=regExSeparaNumeros.exec(numero));)telefono+=result[0];return telefono},fn.sinDiacriticos=function(texto){var de="ÁÃÀÄÂÉËÈÊÍÏÌÎÓÖÒÔÚÜÙÛÑÇáãàäâéëèêíïìîóöòôúüùûñç",re=new RegExp("["+de+"]","ug");return texto.replace(re,function(match){return"AAAAAEEEEIIIIOOOOUUUUNCaaaaaeeeeiiiioooouuuunc".charAt(de.indexOf(match))})},fn.jsonEncode=function(obj){return btoa(JSON.stringify(obj))},fn.esError=function(obj,link){if(obj&&obj.length){obj=$.isArray(obj)?obj[0]:obj;var resultado=obj.Resultado;if(resultado)return!resultado||1!=resultado&&2!=resultado&&3!=resultado?null:(console.error(obj.Msg,"Ooops...!\n\r(╯°□°）╯︵ ┻━┻\n\rOrigen\n\r"+link),obj)}},fn.html_encode=function(string){for(var ret_val="",i=0;i<string.length;i++)string.codePointAt(i)>127?ret_val+="&#"+string.codePointAt(i)+";":ret_val+=string.charAt(i);return ret_val},fn.descargar=function(urlDescargable){var fileName=urlDescargable.substring(urlDescargable.lastIndexOf("/")+1,urlDescargable.length),a=document.createElement("a");a.setAttribute("href",urlDescargable),a.setAttribute("download",fileName),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},fn.cargaDatos=function(obj){var linkFile,callback,almacen,respuestaAlmacen,error,prmAdicionales,metodo="GET",parametros="",dataType="json",formData=!1,cache=!1,jCallback="",crossDomain=!1,contentType="application/x-www-form-urlencoded; charset=UTF-8",processData=!0;obj.link&&(linkFile=obj.link),obj.parametros&&(parametros=obj.parametros),obj.prmAdicionales&&(prmAdicionales=obj.prmAdicionales),obj.callback&&(callback=obj.callback),obj.dataType&&(dataType=obj.dataType),obj.almacen&&(almacen=obj.almacen),obj.metodo&&(metodo=obj.metodo),obj.cache&&(cache=obj.cache),obj.jCallback&&(jCallback=obj.jCallback),obj.crossDomain&&(crossDomain=obj.crossDomain);var parametrosLlamada;return formData="GET"!=metodo,formData?(parametrosLlamada=new FormData,parametrosLlamada.append("params",fn.jsonEncode(parametros)),parametrosLlamada.append("token",""),contentType=!1,processData=!1):parametrosLlamada="parametros="+fn.jsonEncode(parametros),almacen&&(respuestaAlmacen=localStorage[almacen])&&null!=respuestaAlmacen&&void 0!=respuestaAlmacen?(callback&&callback(null,respuestaAlmacen,null,prmAdicionales),!0):($.ajax({type:metodo,async:!0,dataType:dataType,cache:cache,contentType:contentType,processData:processData,url:linkFile,data:parametrosLlamada,crossDomain:crossDomain,jsonpCallback:jCallback}).done(function(datos,status,xhr){var err=fn.esError(datos,linkFile);almacen&&(localStorage[almacen]=datos),callback&&callback(err,datos)}).fail(function(xhr,textStatus,errorThrown){error={xhr:xhr,textStatus:textStatus,errorThrown:errorThrown},callback&&callback(error,null)}),!0)},fn.reemplazaDatos=function(obj){return Handlebars.compile(obj.template)(obj.datos)},fn.fechaDMMMMYYYY=function(fecha){console.log(fecha);var expresionSeparador=/[\-\T]/g,infoFecha=fecha.split(expresionSeparador),meses=["","enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];return infoFecha[2]+" de "+meses[parseInt(infoFecha[1])]+", "+infoFecha[0]},fn.getParameter=function(obj){var name=obj.name,url=obj.url;url||(url=window.location.href);var nombre=name.replace(/[\[\]]/g,"\\$&"),regex=new RegExp("[?&]"+nombre+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},fn.strReplace=function(search,replace,subject,count){var i=0,j=0,temp="",repl="",sl=0,fl=0,f=[].concat(search),r=[].concat(replace),s=subject,ra="[object Array]"===Object.prototype.toString.call(r),sa="[object Array]"===Object.prototype.toString.call(s);for(s=[].concat(s),count&&(this.window[count]=0),i=0,sl=s.length;i<sl;i++)if(""!==s[i])for(j=0,fl=f.length;j<fl;j++)temp=s[i]+"",repl=ra?void 0!==r[j]?r[j]:"":r[0],s[i]=temp.split(f[j]).join(repl),count&&s[i]!==temp&&(this.window[count]+=(temp.length-s[i].length)/f[j].length);return sa?s:s[0]},fn.cargaTemplate=function(params){var link=params.link,callback=params.callback,callbackOrigen=params.callback,almacen=!!params.almacen&&params.almacen,templates=(params.parametros,{}),errores={};if(!link||!callback)return callback(null,{error:"Parametros incompletos"}),!1;var combinarTemplates=function(template,err){templates=_.extend(templates,template),errores=_.extend(errores,err),++numTemplates==totalTemplates&&(_.size(errores)&&(errores=null),callbackOrigen(errores,templates))},procesaTemplate=function(err,html){if(err)return callback(null,err),!1;var templates={};$(html).find("[id]").each(function(e,s){if(0==s.id.indexOf("ptl")){var name=s.id;Handlebars.registerPartial(name,$(s).html())}else templates[s.id]=$(s).html()}),callback(templates,null)};if(Array.isArray(link)){var numTemplates=0,totalTemplates=_.size(link);callback=combinarTemplates,_.each(link,function(url){almacen="tmp"+url.hashCode(),fn.cargaDatos({link:url,callback:procesaTemplate,dataType:"html",almacen:almacen})})}else almacen="tmp"+link.hashCode(),fn.cargaDatos({link:link,callback:procesaTemplate,dataType:"html",almacen:almacen})},fn.guardarPais=function(){var codigoPais=fn.getParameter({name:"codigoPais",url:document.location.href});codigoPais=codigoPais||"",!localStorage.Pais&&codigoPais&&(localStorage.Pais=codigoPais)},fn.guardarFecha=function(){var hoy=new Date,codigoFecha=hoy.getFullYear()+","+(hoy.getMonth()+1)+","+hoy.getDate()+","+hoy.getHours()+","+hoy.getMinutes();localStorage.Fecha||(localStorage.Fecha=codigoFecha)},fn.guardarDistribuidor=function(){var idd=fn.getParameter({name:"idd",url:document.location.href});idd=idd||"",!localStorage.Distribuidor&&idd&&(localStorage.Distribuidor=idd)},fn.guardarReferido=function(){var referrer=document.referrer;!localStorage.Referido&&referrer&&(localStorage.Referido=referrer)},fn.btnSpin=function(obj){var reset=obj.reset,cargando=obj.cargando,mensaje=obj.mensaje,textoOriginal=obj.textoOriginal,$t=obj.t?$(obj.t):obj.boton,spinner=' <i class="fa fa-lg fa-spin fa-spinner"></i> ',str=$.trim($t.text()),txtBtn=$t.html();reset?(textoOriginal?$t.html(textoOriginal):$t.html($t.attr("data-btnOriginal")),$t.removeAttr("disabled"),$t.removeAttr("data-btnOriginal")):($t.attr("disabled","true"),$t.attr("data-btnOriginal",txtBtn),cargando=cargando?"Cargando "+spinner:spinner+str,cargando=mensaje?mensaje+spinner:cargando,$t.html(cargando))},fn.numKeyCode=function(e){return e.keyCode?e.keyCode:e.which},fn.jqryElement=function(elemento){var type=typeof elemento;return"object"===type&&elemento.context?elemento:"string"!==type&&elemento.context?(console.log("El elemento no es valido"),null):$(elemento)},fn.clickAlEnter=function(elemToEnter,elemToClick){var $elemToEnter=fn.jqryElement(elemToEnter),$elemToClick=fn.jqryElement(elemToClick);$elemToEnter.keypress(function(e){if(13===(event.keyCode||event.which))return $elemToClick.click(),null})},fn.strEncode=function(Op){var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,r,i,s,o,u,a,t="",f=0;for(e=Base64._utf8_encode(e);f<e.length;)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(3&n)<<4|r>>4,u=(15&r)<<2|i>>6,a=63&i,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var n,r,i,s,o,u,a,t="",f=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<e.length;)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(15&o)<<4|u>>2,i=(3&u)<<6|a,t+=String.fromCharCode(n),64!=u&&(t+=String.fromCharCode(r)),64!=a&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}},str=Op.str?Op.str:"";return Op.encode?Base64.encode(str):Op.decode?Base64.decode(str):str},fn.wsEnviaCorreos=function(data){return fn.postReq("https://apifans.salesup.com:4431/enviacorreos",data)},fn.enviaCorreo=function(correo,asunto,cuerpo){var data={correo:correo,asunto:asunto,cuerpo:fn.strEncode({str:cuerpo,encode:!0})};return fn.wsEnviaCorreos(data)},function(){fn.guardarDistribuidor(),fn.guardarReferido(),fn.guardarPais(),fn.guardarFecha()}();var SistemaDefault=function(){var PasaGetData=!0,Time,Destino,LinkFile="",Parametros="",Funcion,Status,Objeto,Valor,EsPagina,AlmacenUltimaPagina="UltimaPagina",AlmacenParametros="Parametros",AlmacenDestino="Destino",AlmacenFuncion="Funcion",AlmacenObjeto="Objeto",DataType="json",Almacen,TiempoSolicitud=function(){var Time=new Date;return Time="?t="+Time.getTime()},AddTime=function(p){var _Time=new Date;return _Time=_Time.getTime(),"string"==typeof p&&(p=""==p?"rt="+_Time:p+"&rt="+_Time),"object"==typeof p&&(p.dbspTime=_Time),p},Opciones=function(Op){Op.Link&&(LinkFile=Op.Link),Op.Parametros&&(Parametros=Parametros=AddTime(Op.Parametros)),Op.Destino&&(Destino=Op.Destino),Op.Funcion&&(Funcion=Op.Funcion),Op.Objeto&&(LinkFile=Op.Objeto),Op.DataType&&(DataType=Op.DataType),Op.Almacen&&(Almacen=Op.Almacen)},AjaxSetUp=function(){jQuery.ajaxSetup({beforeSend:function(xhr){xhr.overrideMimeType("text/html; charset=iso-8859-1;")}})},GetData=function(){var Respuesta="";if("json"==DataType&&(Respuesta=JSON.parse('{"jsonDatos":[{}]}')),Almacen){var Almacen=SalesUp.Sistema.Almacenamiento({a:Almacen});if(!_.isUndefined(Almacen)&&_.size(Almacen)>0)return SalesUp.Sistema.Almacenamiento({a:Almacen})}if(jQuery.ajaxSetup({beforeSend:function(xhr){xhr.overrideMimeType("text/"+DataType+"; charset=iso-8859-1;")}}),SalesUp.Variables.xhr=jQuery.ajax({type:"GET",async:!1,dataType:DataType,cache:!1,url:LinkFile,data:Parametros}).done(function(RespuestaData){PasaGetData=SalesUp.Sistema.NoEsIndex({Resp:RespuestaData}),PasaGetData&&(_.isEmpty(Destino)?Respuesta="json"==DataType?JSON.parse(jQuery.trim(JSON.stringify(RespuestaData))):RespuestaData:jQuery(Destino).html(RespuestaData),Funcion&&eval(Funcion)),AjaxSetUp()}),setTimeout(function(){SalesUp.Sistema.Almacenamiento({a:"SysReload",v:0})},5e3),Almacen&&SalesUp.Sistema.Almacenamiento({a:Almacen,v:Respuesta}),!Destino)return Respuesta};this.PostData=function(Op){jQuery.ajaxSetup({beforeSend:function(xhr){xhr.overrideMimeType("text/html; charset=iso-8859-1;")}}),jQuery.ajax({type:"POST",async:!1,dataType:"html",cache:!1,url:Op.Link+"?"+AddTime(Op.Parametros)}).done(function(RespuestaData){Op.Funcion&&eval(Op.Funcion)})},this.deDondeViene=function(){var Almacen=SalesUp.Sistema.Almacenamiento({a:Almacen});if(!_.isUndefined(Almacen)&&_.size(Almacen)>0)return SalesUp.Sistema.Almacenamiento({a:Almacen})},this.Almacenamiento=function(Op){for(var x=0;x<=localStorage.length-1;x++){var clave=localStorage.key(x);"[object Object]"==localStorage.getItem(clave)&&localStorage.removeItem(clave)}var str="",Contenido="",esJson=!1;if(str=Op.a.substring(0,4),"json"==str&&(esJson=!0),void 0===Op.v){var Guardado=localStorage[Op.a];_.isUndefined(Guardado)||esJson&&(Guardado=JSON.parse(Guardado));var PasaGetData=SalesUp.Sistema.NoEsIndex({Resp:Guardado});return PasaGetData||(Guardado=void 0),Guardado}Contenido=esJson?JSON.stringify(Op.v):Op.v;var PasaGetData=SalesUp.Sistema.NoEsIndex({Resp:Contenido});if(!PasaGetData)return!1;if("[object Object]"==Contenido)return!1;try{localStorage[Op.a]=Contenido}catch(e){e==QUOTA_EXCEEDED_ERR&&(SalesUp.Sistema.BorrarTodoAlmacen(),localStorage[Op.a]=Contenido)}},this.NoEsIndex=function(Op){var EsIndex,EsOoops,Pasa=!0;if(_.isUndefined(Op.Resp)&&(Op.Resp=""),!Op.Resp)return!1;var Str;return Str=_.isObject(Op.Resp)?JSON.stringify(Op.Resp):Op.Resp,EsIndex=Str.toString().indexOf("VerificaParent.js"),EsOoops=Str.toString().indexOf("url=/privado/ooops.dbsp"),(EsIndex>0||EsOoops>0)&&(SalesUp.Sistema.BorrarTodoAlmacen(),Pasa=!1),Pasa},this.IntentarDeNuevo=function(){var Reload=parseInt(SalesUp.Sistema.Almacenamiento({a:"SysReload"}));SalesUp.Sistema.BorrarTodoAlmacen(),Reload<=3&&(Reload+=1,SalesUp.Sistema.Almacenamiento({a:"SysReload",v:Reload}),SalesUp.Variables.xhr.abort(),setTimeout(function(){document.location=location.pathname+"?r="+(new Date).getTime()},100)),4==Reload&&setTimeout(function(){document.location="inicio.dbsp?n="+(new Date).getTime()},100)},this.BorrarItemDeAlmacen=function(Item){localStorage.removeItem(Item)},this.BorrarTodoAlmacen=function(){for(x=localStorage.length-1;x>=0;x--){var Item=localStorage.key(x);"Sys"!=Item.substring(0,3)&&localStorage.removeItem(Item)}},this.EliminaConfigColumnas=function(){SalesUp.Sistema.BorrarItemDeAlmacen("ProspectosTheadColumas"),SalesUp.Sistema.BorrarItemDeAlmacen("ProspectosTbodyColumas"),SalesUp.Sistema.BorrarItemDeAlmacen("ClientesTbodyColumas"),SalesUp.Sistema.BorrarItemDeAlmacen("ClientesTbodyColumas")},this.CargaDatos=function(Op){if(Opciones(Op),PasaGetData)return GetData();SalesUp.Sistema.IntentarDeNuevo()},this.esIE=function(){var Es=!1,myNav=navigator.userAgent.toLowerCase();return(-1!=myNav.indexOf("msie")||-1!=myNav.indexOf("trident")&&-1!=myNav.indexOf("rv:11"))&&(Es=!0),Es},this.VersionIE=function(){var myNav=navigator.userAgent.toLowerCase();return-1!=myNav.indexOf("msie")?parseInt(myNav.split("msie")[1]):""},this.AbrirLinkExterno=function(Op){var Pagina="";Pagina=-1!=Op.Pagina.indexOf("http://")?Op.Pagina:-1!=Op.Pagina.indexOf("https://")?Op.Pagina:"http://"+Op.Pagina,window.open(Pagina,"_blank")},this.EsNumero=function(n){return/^\d+$/.test(n)},this.SoloNumero=function(n){return n.replace(/[^0-9]/g,"")},this.StrReplace=function(search,replace,subject,count){var i=0,j=0,temp="",repl="",sl=0,fl=0,f=[].concat(search),r=[].concat(replace),s=subject,ra="[object Array]"===Object.prototype.toString.call(r),sa="[object Array]"===Object.prototype.toString.call(s);for(s=[].concat(s),count&&(this.window[count]=0),i=0,sl=s.length;i<sl;i++)if(""!==s[i])for(j=0,fl=f.length;j<fl;j++)temp=s[i]+"",repl=ra?void 0!==r[j]?r[j]:"":r[0],s[i]=temp.split(f[j]).join(repl),count&&s[i]!==temp&&(this.window[count]+=(temp.length-s[i].length)/f[j].length);return sa?s:s[0]},this.NumKeyCode=function(e){return e.keyCode?e.keyCode:e.which},this.ValidaFecha=function(v){return/^\d{4}-\d{2}-\d{2}$/.test(v)},this.Dispositivo=function(Op){if(!Op)return!1;var Es;return"tablet"===Op.Es&&(Es=device.tablet()),"ios"===Op.Es&&(Es=device.ios()),"android"===Op.Es&&(Es=device.android()),"desktop"===Op.Es&&(Es=device.desktop()),Es},this.OpenInNewTab=function(url){window.open(url,"_blank").focus()},this.getAllattr=function(obj){for(var attrs=obj.attributes,arr={},i=0;i<attrs.length;i++)arr[attrs[i].name]=attrs[i].value;return arr},this.qryString=function(Op){function crearQruString(elem){var $e=jQuery(elem);return $e.attr("name")+"="+escape(jQuery.trim($e.val()))+"&"}for(var $Contenedor=jQuery(Op.Formulario),qryString="",arrInputs=$Contenedor.find("input"),arrSelect=$Contenedor.find("select"),arrText=$Contenedor.find("textarea"),i=0;i<=arrInputs.length-1;i++)qryString+=crearQruString(arrInputs[i]);for(var j=0;j<=arrSelect.length-1;j++)qryString+=crearQruString(arrSelect[j]);for(var k=0;k<=arrText.length-1;k++)qryString+=crearQruString(arrText[k]);return qryString},this.ObtenerPaises=function(){var jsonControl=SalesUp.Sistema.CargaDatos({Link:"https://control.salesup.com.mx/webservices/jsonPaises.dbsp"}),htmlOpcion='{{#each jsonDatos}}<option value="{{IdPais}}">{{Pais}}</option>{{/each}}',Opciones=SalesUp.Sistema.ReemplazaDatos({Template:htmlOpcion,Datos:jsonControl});jQuery("#Paises_SingUp").append(Opciones)},this.EscondeEstados=function(){jQuery("#Estados_SingUp").find("option").length>1?jQuery("#DivEstados").show():jQuery("#DivEstados").hide()},this.ObtenerEstados=function(Op){var jsonControl=SalesUp.Sistema.CargaDatos({Link:"https://control.salesup.com.mx/webservices/jsonEstados.dbsp",Parametros:"p="+Op.v});jsonControl.jsonDatos=_.reject(jsonControl.jsonDatos,function(j){return 0==_.size(j)}),jQuery("#Estados_SingUp").html(""),_.size(jsonControl.jsonDatos)>1&&jQuery("#Estados_SingUp").html('<option value="">(... Seleccionar estado ...)</option>');var htmlOpcion='{{#each jsonDatos}}<option value="{{IdEstado}}">{{Estado}}</option>{{/each}}',Opciones=SalesUp.Sistema.ReemplazaDatos({Template:htmlOpcion,Datos:jsonControl});jQuery("#Estados_SingUp").append(Opciones),SalesUp.Sistema.EscondeEstados&&SalesUp.Sistema.EscondeEstados()},this.ReemplazaDatos=function(Op){var HtmlTemplate=Handlebars.compile(Op.Template);return 0==_.size(Op.Datos)?(console.warn("El objeto esta vacio"),""):HtmlTemplate(Op.Datos)},this.queryStringtoArray=function(){var qs,parametros={};if(null==qs&&(qs=location.search.substring(1,location.search.length)),0!=qs.length){qs=qs.replace(/\+/g," ");for(var args=qs.split("&"),i=0;i<args.length;i++){var pair=args[i].split("="),name=decodeURIComponent(pair[0]),value=2==pair.length?decodeURIComponent(pair[1]):name;parametros[name]=value}return parametros}},this.GuardarDistribuidor=function(){var idd,Datos=SalesUp.Sistema.queryStringtoArray();Datos||(Datos={}),Datos.idd&&(idd=Datos.idd),SalesUp.Sistema.Almacenamiento({a:"Distribuidor"})||idd&&SalesUp.Sistema.Almacenamiento({a:"Distribuidor",v:idd})},this.GuardarReferido=function(){var referrer=document.referrer;SalesUp.Sistema.Almacenamiento({a:"Referido"})||SalesUp.Sistema.Almacenamiento({a:"Referido",v:referrer}),console.log("Referido - ",SalesUp.Sistema.Almacenamiento({a:"Referido"}))},this.popOver=function(Op){var container="",title="",$t=jQuery(Op.t);jQuery(".tipsy").remove(),jQuery(".popover").hide(),$t.popover("destroy");var placement="top";Op.placement&&(placement=Op.placement),Op.title&&(title=Op.title),Op.container&&(container=Op.container),Op.clases&&Op.clases;var popOverId="PopOver"+(new Date).getTime();$t.popover({html:!0,container:"body",placement:placement,title:title,content:container});$t.popover("show");var $popOverId=jQuery("#"+popOverId);_.size($popOverId)&&($popOverId=jQuery("#"+jQuery(".popover").attr("id")));var Cerrar=!0;$popOverId.mouseleave(function(){Cerrar=!0,setTimeout(function(){Cerrar&&$popOverId.hide()},1e3)}).mouseenter(function(){Cerrar=!1}).click(function(){$popOverId.hide()}),setTimeout(function(){Cerrar&&$popOverId.hide()},4e3),$t.mouseleave(function(){Cerrar=!0,setTimeout(function(){Cerrar&&$popOverId.hide()},3e3)}).mouseenter(function(){Cerrar=!1})},this.CargaDatosAsync=function(Op){$(".tipsy").remove();var linkFile,callback,almacen,respuestaAlmacen,error,prmAdicionales,metodo="GET",parametros="",dataType="json",formData=!1;Op.link&&(linkFile=Op.link),Op.parametros&&(parametros=Op.parametros),Op.prmAdicionales&&(prmAdicionales=Op.prmAdicionales),Op.callback&&(callback=Op.callback),Op.dataType&&(dataType=Op.dataType),Op.almacen&&(almacen=Op.almacen),Op.metodo&&(metodo=Op.metodo),Op.formData&&(formData=Op.formData);var contentType="application/x-www-form-urlencoded; charset=UTF-8",processData=!0;return formData&&(contentType=!1,processData=!1),almacen&&(respuestaAlmacen=SalesUp.Sistema.Almacenamiento({a:almacen}))&&"null"!=respuestaAlmacen&&"undefined"!=respuestaAlmacen?(callback&&callback(respuestaAlmacen,null,prmAdicionales),!0):($.ajaxSetup({beforeSend:function(xhr){xhr.overrideMimeType("text/json; charset=iso-8859-1;")}}),$.ajax({type:metodo,async:!0,dataType:dataType,cache:!1,contentType:contentType,processData:processData,url:linkFile,data:parametros}).done(function(RespuestaData){$.ajaxSetup({beforeSend:function(xhr){xhr.overrideMimeType("text/html; charset=iso-8859-1;")}}),almacen&&SalesUp.Sistema.Almacenamiento({a:almacen,v:RespuestaData}),callback&&callback(RespuestaData,null,prmAdicionales)}).fail(function(xhr,textStatus,errorThrown){$.ajaxSetup({beforeSend:function(xhr){xhr.overrideMimeType("text/html; charset=iso-8859-1;")}}),error={xhr:xhr,textStatus:textStatus,errorThrown:errorThrown},callback&&callback(null,error,prmAdicionales)}),!0)}},FuncionesDemo=function(){var qryCrearCuentaDemo="qryCrearCuentaDemo.dbsp",form={},Self=this,Distribuidor=localStorage.Distribuidor;Distribuidor=Distribuidor||"";var Pais=localStorage.Pais;Pais=Pais||"";var agregaEtiqueta=!1,etiquetar={origen:"",etiqueta:"",etiqueta1:"",etiqueta2:"",comentarios:""},extras={};this.setEtiquetas=function(obj){agregaEtiqueta=!0,obj.origen&&(etiquetar.origen=obj.origen),obj.etiqueta&&(etiquetar.etiqueta=obj.etiqueta),obj.etiqueta1&&(etiquetar.etiqueta1=obj.etiqueta1),obj.etiqueta2&&(etiquetar.etiqueta2=obj.etiqueta2),obj.comentarios&&(etiquetar.comentarios=obj.comentarios)};var esReferido=function(){if(localStorage.dtRef){var d=JSON.parse(localStorage.dtRef),comentario="#Contacto recomendado como: "+d.correo+", por: "+d.fanNombre+", con telefono: "+d.fanTelefono+", correo:"+d.correo;Self.setEtiquetas({origen:"3372",etiqueta:"4152",comentarios:comentario})}};this.crearProspecto11811=function(obj){obj.callbackFeedbag({opcion:4,mensaje:"Enviando..."}),form=obj,esReferido();var crearProspecto=function(){SalesUp.Sistema.CargaDatosAsync({link:"https://control.salesup.com.mx/webservices/qryPruebaloGratis.dbsp",parametros:form.strPruebaloGratis,dataType:"html",callback:form.callback})};if(agregaEtiqueta&&"function"==typeof fnLead.WSguardaProspecto){var datos=JSON.parse(localStorage.datosDemoP1);fnLead.setDatosLead({origen:etiquetar.origen,etiqueta:etiquetar.etiqueta,etiqueta1:etiquetar.etiqueta1,etiqueta2:etiquetar.etiqueta2,comentarios:etiquetar.comentarios,nombre:datos.nombre,apellidos:datos.apellido,correo:datos.email}),fnLead.WSguardaProspecto(crearProspecto)}else crearProspecto()},this.existeUsuario=function(obj){var procesaExisteUsuario=function(op,err){return err?(obj.callbackFeedbag({opcion:2,mensaje:"P2"}),null):op.Existe>=1?(obj.callbackFeedbag({opcion:1,mensaje:"P1"}),null):void(0==op.Existe&&(console.log("R"),obj.callbackFeedbag({opcion:3,mensaje:"P3"}),obj.callback&&obj.callback()))};SalesUp.Sistema.CargaDatosAsync({link:"https://control.salesup.com.mx/webservices/jsonValidandoUsrNuevo.dbsp",parametros:"c="+obj.email,callback:procesaExisteUsuario})},this.separaNombres=function(obj){SalesUp.Sistema.CargaDatosAsync({link:"https://control.salesup.com.mx/webservices/jsonNombreyApellidos.dbsp",parametros:"nombreCompleto="+obj.nombreCompleto,callback:obj.callback})},this.tipoCorreo=function(email){return/^([a-zA-Z0-9_\.\-])+\@(live|hotmail|outlook|aol|yahoo|rocketmail|gmail|gmx|facebook|mail|msn|yandex|zoho|icloud|mail|fastmail|prodigy)(\.[a-zA-Z0-9]{2,4})+/.test(email)},this.guardaTipoCorreo=function(email){Self.tipoCorreo(email)?localStorage.setItem("emailT","0"):localStorage.setItem("emailT","1")};var creaExtras=function(referido){return extras.vinoDe=localStorage.vinoDe?fn.strReplace("&","/",localStorage.vinoDe):"",extras.llegoA=localStorage.llegoA?fn.strReplace("&","/",localStorage.llegoA):"",extras.creoEn=localStorage.creoEn?fn.strReplace("&","/",localStorage.creoEn):"",extras.referido=referido||"",extras.idRef=localStorage.idRef?localStorage.idRef:"",extras.sesiones=localStorage.sesiones?localStorage.sesiones:"","&extras="+encodeURIComponent(JSON.stringify(extras))+"&onboarding=1"};this.crearDemo=function(obj){var procesaCrearDemo=function(RespuestaCrearDemo,err){if(err)return obj.callbackFeedbag({opcion:6,mensaje:err}),null;var Servidor="einstein";Servidor="https://"+Servidor+".salesup.com.mx/login.dbsp";var elAction="/pruebalo-signup-done.shtml";SalesUp.Variables.noGracias&&(elAction=Servidor);var datosDemo={};datosDemo.accion=elAction,datosDemo.correo=obj.email,datosDemo.contrasena=decodeURIComponent(obj.contrasenia),datosDemo.servidor=Servidor,datosDemo=JSON.stringify(datosDemo),localStorage.removeItem("datosDemoP1"),localStorage.removeItem("registrado"),localStorage.removeItem("Cumbre"),sessionStorage.removeItem("dConf");var codificado=fn.strEncode({str:datosDemo,encode:!0});localStorage.datosDemo=codificado,document.location.href=elAction},params=obj.datosRegistro+creaExtras(obj.referido);obj.callbackFeedbag({opcion:5,mensaje:"Creando cuenta demo..."}),SalesUp.Sistema.CargaDatosAsync({link:"https://control.salesup.com.mx/webservices/"+qryCrearCuentaDemo,parametros:params,callback:procesaCrearDemo,dataType:"html"})}},funcionesDemo=new FuncionesDemo;Handlebars.registerHelper("isEmail",function(context,options){return"email"===context.atributos.tipo?options.fn(this):options.inverse(this)}),Handlebars.registerHelper("isPassword",function(context,options){return"password"===context.atributos.type?options.fn(this):options.inverse(this)}),Handlebars.registerHelper("esParte2",function(context,options){return 3===context.funcion&&context.paso2?options.fn(this):options.inverse(this)}),Handlebars.registerHelper("eachParte",function(context,options){var ret="",paso=!context.paso1Fijo&&context.paso2;if(3===context.funcion&&paso)for(var j=context.camposVista2.length,i=0;i<j;i++){var item=context.camposVista2[i];item.index=i,item.atributos.index=i,ret+=options.fn(item)}else for(var j=context.camposVista1.length,i=0;i<j;i++){var item=context.camposVista1[i];item.index=i,item.atributos.index=i,ret+=options.fn(item)}return ret}),Handlebars.registerHelper("eachCampo",function(context,options){for(var ret="",j=context.campos.length,i=0;i<j;i++){var item=context.campos[i];item.index=i,item.atributos.index=i,ret+=options.fn(item)}return ret}),Handlebars.registerHelper("renderString",function(string,ocurre,valorActual){if(string&&ocurre&&valorActual&&ocurre==valorActual)return new Handlebars.SafeString(string)});var SalesUp={};SalesUp.Variables={},SalesUp.Sistema=new SistemaDefault,localStorage.tmp1042731571&&localStorage.removeItem("tmp1042731571"),localStorage.tmp2139896689&&localStorage.removeItem("tmp2139896689"),localStorage.Distribuidor&&"165"==localStorage.Distribuidor&&localStorage.removeItem("Distribuidor");var tk=fn.getParameter({name:"tk",url:document.location.href});tk&&(SalesUp.Variables.deDonde=tk);var Validaciones=function(){this.validaCorreo=function(mail){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+/.test(mail)},this.validaNumeroTelefono=function(numero){return/^([\(\+ ]*[\d]{1,4}[\)]*)[-| ]*([\d]{2,4}[-| ]*){1,4}([\d]{2,4}$|[\d]{2,4}[ ]*$)/.test(numero)},this.validaNombre=function(nombre){return/^[a-zA-Z\s'-.ÇçÁáÉéÍíÓóÚúÑñÜü]+$/.test(nombre)}},validar=new Validaciones,SignupMaterial2Pasos=function(){function comparaVendedores(vendedores,opcion){var encaja=!1;if(1===opcion)for(var i=0;i<numeroDeVendedoresCorporativo.length;i++)vendedores===numeroDeVendedoresCorporativo[i]&&(encaja=!0);else if(2===opcion)for(var i=0;i<numeroDeVendedoresVentas.length;i++)vendedores===numeroDeVendedoresVentas[i]&&(encaja=!0);else if(3===opcion)for(var i=0;i<numeroDeVendedoresDefault.length;i++)vendedores===numeroDeVendedoresDefault[i]&&(encaja=!0);return encaja}function cuerpoCorreo(nombre,correo,vendedores,estado){var cuerpo="<div>Se ha generado una nueva Demo<br><br>";return cuerpo+="<b>Nombre: </b>"+fn.html_encode(nombre)+"<br><br>",cuerpo+="<b>Correo: </b>"+correo+"<br><br>",cuerpo+="<b>Vendedores: </b>"+fn.html_encode(vendedores)+"<br><br>",cuerpo+="<b>Estado: </b>"+fn.html_encode(estado)+"<br></div>"}function enviaCorreoEjecutivo(nombre,correo){var vendedores=$('[name="numVendedores"]').val(),estado=$('[name="ESTADO"]').val();switch(!0){case comparaVendedores(vendedores,1):fn.enviaCorreo(correoEjecutivoCorporativo,asuntoCorreo,cuerpoCorreo(nombre,correo,vendedores,estado));break;case comparaVendedores(vendedores,2):fn.enviaCorreo(correoEjecutivoVentas,asuntoCorreo,cuerpoCorreo(nombre,correo,vendedores,estado));break;case comparaVendedores(vendedores,3):estadosOCC.indexOf(estado)>=0&&fn.enviaCorreo(correoEjecutivoOCC,asuntoCorreo,cuerpoCorreo(nombre,correo,vendedores,estado));break;default:if(sessionStorage.getItem(demoConfig)){var dConf=JSON.parse(sessionStorage.getItem(demoConfig));dConf.emailNotif&&fn.enviaCorreo(dConf.emailNotif,asuntoCorreo,cuerpoCorreo(nombre,correo,vendedores))}}}function enviaCorreoEjecutivoBuenFin(nombre,correo){var vendedores=$('[name="numVendedores"]').val(),estado=$('[name="ESTADO"]').val();switch(!0){case comparaVendedores(vendedores,1):case comparaVendedores(vendedores,2):fn.enviaCorreo(correoVentas,asuntoCorreoBuenFin,cuerpoCorreo(nombre,correo,vendedores,estado));break;case comparaVendedores(vendedores,3):estadosOCC.indexOf(estado)>=0?fn.enviaCorreo(correoVentas,asuntoCorreoBuenFin,cuerpoCorreo(nombre,correo,vendedores,estado)):"https://www.salesup.com/software-crm-de-ventas.shtml"==localStorage.creoEn&&fn.enviaCorreo(correoVentas,asuntoCorreoBuenFin,cuerpoCorreo(nombre,correo,vendedores,estado));break;default:if(sessionStorage.getItem(demoConfig)){var dConf=JSON.parse(sessionStorage.getItem(demoConfig));dConf.emailNotif&&fn.enviaCorreo(dConf.emailNotif,asuntoCorreo,cuerpoCorreo(nombre,correo,vendedores))}}}var Self=this,idEjecutivo="101590",numeroDeVendedoresCorporativo=["Más de 100 vendedores"],correoEjecutivoCorporativo="georgina.sosa@salesup.com.mx,greisy.lara@salesup.com.mx,sergio.ponce@salesup.com.mx",asuntoCorreo="Nueva Demo",asuntoCorreoBuenFin="Nueva Demo creada en CDMX",numeroDeVendedoresVentas=["40-100 vendedores"],correoEjecutivoVentas="demos.ejecutivos@salesup.com.mx",correoVentas="uri.juarez@salesup.com.mx,alexis.salesup@gmail.com",numeroDeVendedoresDefault=["Autónomo","1 vendedor","2-3 vendedores","4-9 vendedores","10-39 vendedores"],correoEjecutivoOCC="carla.ramos@salesup.com.mx,marisol.ascencio@salesup.com.mx,sergio.ponce@salesup.com.mx",correoEjecutivoErrorDemo="demo.incompleta@salesup.com.mx,alan.pech@salesup.com.mx",asuntoCorreoErrorDemo="Demo incompleta por error de servidor",enviandoCorreo=0,correoEnviado=0,estadosOCC=["Aguascalientes","Colima","Guanajuato","Jalisco","Michoacán","Querétaro","San Luis Potosí","Sinaloa"],append="",$boton={},botonID="",paso2=!1,template="",telefono="",campoActual=0,objFormulario={},nombrePersona="",validaNombre=!1,apellidoPersona="",botonActualText="",camposAdicionales="",$frmFormularioSignUp="",referido="",estado="",pais="",demoConfig="dConf",emailVerificado={valid:null,email:""},resetBoton=function(){fn.btnSpin({reset:!0,t:botonID,textoOriginal:botonActualText})},fnBoton=function(obj){if(validaNombre)validarFormAsync(obj);else{validarForm(obj.campos)?obj.fn():resetBoton()}},separaNombres=function(nombres){if(apellidoPersona="",nombres=nombres.trim(),nombres=nombres.split(" "),nombrePersona=nombres[0],nombrePersona=fn.primeraMayus(nombrePersona),nombres[1])for(var i=1;i<nombres.length;i++)i==nombres.length-1?apellidoPersona+=fn.primeraMayus(nombres[i]):apellidoPersona+=fn.primeraMayus(nombres[i])+" "},validarFormAsync=function(obj){var campos=obj.campos,validacion=!0,$nombre=$frmFormularioSignUp.find('[data-tipo="nombre"]'),nombre=$nombre.val().trim(),nombreId=$nombre.attr("id"),validarCampos=function(res,err){if(err)validar.validaNombre(nombre)?(separaNombres(nombre),MDFormFeedbagHandler({valid:!0,id:nombreId})):(MDFormFeedbagHandler({valid:!1,id:nombreId}),validacion=!1);else{var datos=res.jsonDatos[0];"Ok"===datos.msg?(nombrePersona=datos.nombre.capitalize(),datos.apellidos&&(apellidoPersona=datos.apellidos.capitalize()),MDFormFeedbagHandler({valid:!0,id:nombreId})):(MDFormFeedbagHandler({valid:!1,id:nombreId}),validacion=!1)}for(var i=0;i<campos.length;i++){var idCampo="#inputField"+i;if(idCampo!="#"+nombreId){var $elemento=$(idCampo);Self.validaCampo({t:$elemento,retornarResultado:!0})||(validacion=!1)}}validacion?obj.fn():resetBoton()};funcionesDemo.separaNombres({nombreCompleto:nombre,callback:validarCampos})},validaInput=function(tipo,value){switch(tipo){case"nombre":return validar.validaNombre(value);case"email":return emailVerificado.email===value&&emailVerificado.email?emailVerificado.valid:(emailVerificado.email=value,validar.validaCorreo(value)?(funcionesDemo.existeUsuario({email:value,callbackFeedbag:MDFormFeedbag}),spinnerEmail(!0,!0),!0):(emailVerificado.email="",emailVerificado.valid=!0,!1));case"telefono":return!!validar.validaNumeroTelefono(value)&&(telefono=fn.depurarTelefono(value),!0);case"select":return 0!=value&&null!=value;default:return value.length>0}},cargaTemplate=function(templates,err){if(err)return console.log(err),null;var templateForm=templates[template],templateFormCompilado=fn.reemplazaDatos({template:templateForm,datos:objFormulario});$(append).prepend(templateFormCompilado),botonActualText=objFormulario.boton.text,botonID="#"+objFormulario.boton.id,$boton=$(botonID),$frmFormularioSignUp=$("#"+objFormulario.idForm),$("#continuarUsuarioPopup").on("show.bs.modal",function(){actividadPopup()}).on("hidden.bs.modal",function(){actividadPopup()}),$("#crea-demo-popup").on("show.bs.modal",function(){actividadPopup()}).on("hidden.bs.modal",function(){actividadPopup()}),hayCampoNombre(),$frmFormularioSignUp.find("input").val(""),$("#2pasoPaisEstado")[0]?fn.clickAlEnter("#inputField5","#botonFormPopup"):fn.clickAlEnter("#inputField2","#botonFormPopup"),Self.ObtenerPaises(),$('[name="PAIS"]').val("MX").removeClass("selectNoValue"),Self.ObtenerEstados({v:"MX"})},hayCampoNombre=function(){var campos=[];campos=paso2?objFormulario.camposVista2:objFormulario.camposVista1;for(var i=0;i<campos.length;i++)"nombre"==campos[i].atributos.tipo&&(validaNombre=!0,i=campos.length)},validarForm=function(vistaCampos){for(var validacion=!0,i=0;i<vistaCampos.length;i++){var $elemento=$("#inputField"+i);Self.validaCampo({t:$elemento,retornarResultado:!0})||(validacion=!1)}return validacion},infoCamposAdicionales=function(){for(var arrAdicional=$(".infoAdicional"),comentarios=[],strComentario="",i=0;i<arrAdicional.length;i++){var adc=arrAdicional[i],$t=$(adc),label=$t.attr("data-label"),v=$t.val();v&&comentarios.push(label+": "+v)}return strComentario=comentarios.join(", "),strComentario="&infoAdicional="+encodeURIComponent(strComentario)},ipInfo=function(){var ip=SalesUp.Sistema.CargaDatos({Link:"https://control.salesup.com.mx/webservices/obtieneIP.dbsp",DataType:"json"}).ip,datosIp=SalesUp.Sistema.CargaDatos({Link:"https://fenix.salesup.com.mx/ipinfo.php",DataType:"json",Parametros:"ip="+ip});datosIp.ip=ip,"MX"===pais&&(datosIp.region_name=fn.sinDiacriticos(estado));var strDatosIp=JSON.stringify(datosIp);return"&ipInfo="+encodeURIComponent(strDatosIp)},qryString=function(Op){function crearQruString(elem){var $e=$(elem),name=$e.attr("name"),valor=escape($.trim($e.val()));if("str"===Op.fn)switch(name){case"NOMBRE":return"NOMBRE="+escape(nombrePersona)+"&APELLIDOS="+escape(apellidoPersona)+"&";case"TELEFONO":return"TELEFONO="+telefono+"&MOVIL="+telefono+"&";case"EMPRESA":return"EMPRESA="+valor.replace(/%22/gi,"")+"&";case"REFERIDO":referido=valor;break;default:return name+"="+valor+"&"}else if("obj"===Op.fn)return{name:name,valor:valor}}function leerArrays(arr){if(arr.length>0)for(var i=0;i<arr.length;i++)if("str"===Op.fn)qryString+=crearQruString(arr[i]);else if("obj"===Op.fn){var obj=crearQruString(arr[i]);qryString[obj.name]=obj.valor}}var $Contenedor=$(Op.Formulario),qryString="obj"===Op.fn?{}:"",arrInputs=$Contenedor.find('input[type="text"], input[type="number"], input[type="tel"], input[type="password"]'),arrSelect=$Contenedor.find("select"),arrText=$Contenedor.find("textarea");return leerArrays(arrInputs),leerArrays(arrSelect),leerArrays(arrText),qryString},datosCrearDemo=function(obj){var datosRegistro="";if(obj.datosForm&&(datosRegistro=qryString({Formulario:$frmFormularioSignUp,fn:"str"})),!obj.info||obj.info.distribuidor){var Distribuidor="",idd=localStorage.Distribuidor;Distribuidor=idd?"&iddistribuidor="+idd:"",datosRegistro+=Distribuidor}if(!obj.info||obj.info.Pais){var Pais=localStorage.Pais;Pais=Pais?"&Pais="+Pais:"&Pais=",datosRegistro+=Pais}if(!obj.info||obj.info.referidoPor){var VinoDe="",deDonde=SalesUp.Variables.deDonde;$.isNumeric(deDonde)?("1"==deDonde&&(VinoDe="botonsalesup-"),"2"==deDonde&&(VinoDe="pestanas-"),"3"==deDonde&&(VinoDe="ctahome-"),"4"==deDonde&&(VinoDe="formasimple-"),"5"==deDonde&&(VinoDe="precios-")):VinoDe=encodeURIComponent($.trim(deDonde))+"-",VinoDe=SalesUp.Sistema.StrReplace("www.","",document.location.host)+"-"+VinoDe;var Referido=localStorage.Referido;Referido||(Referido=""),Referido="&referidopor="+encodeURIComponent(VinoDe)+Referido,datosRegistro+=Referido}if(!obj.info||obj.info.tracking){var trackingId="";window._suTr&&(trackingId=_suTr.id?_suTr.id:"",trackingId="&trackingId="+trackingId,datosRegistro+=trackingId)}if(obj.info&&!obj.info.ip||(datosRegistro+=ipInfo()),!obj.info||obj.info.vendedores){var numColab=obj.Formulario.find('[name="numVendedores"]').val();numColab=numColab?escape(numColab):"";numVendedores(numColab);datosRegistro+="&VENDEDORES="+numColab}return datosRegistro},actividadPopup=function(){null===localStorage.getItem("tiempo")?(localStorage.setItem("tiempo",1),localStorage.setItem("popupUse",!0)):"1"===localStorage.getItem("tiempo")&&"true"===localStorage.getItem("popupUse")&&(localStorage.removeItem("tiempo"),localStorage.removeItem("popupUse"))},MDFormFeedbagHandler=function(obj){var esEmail=!1,regEx=/[0-9]+/g,idNum=regEx.exec(obj.id),valid=obj.valid,$elemento=$("#"+obj.id),$icon=$("#feedbagIcon"+idNum),$divContainer=$elemento.closest("div");"email"===$elemento.attr("data-tipo")?(campoActual=idNum,esEmail=!0):esEmail=!1,valid?(esEmail&&($("#popupSignupCorreoExiste").attr("style","visibility:hidden;"),$(".popupSignupErrorServer").attr("style","visibility:hidden;")),$("#signupPopupError"+idNum).attr("style",""),$icon.removeClass("fa-times"),$icon.addClass("fa-check"),$divContainer.removeClass("has-danger"),$divContainer.addClass("has-success"),spinnerEmail(esEmail,!1)):(esEmail&&($("#popupSignupCorreoExiste").attr("style","visibility:hidden;"),$(".popupSignupErrorServer").attr("style","visibility:hidden;")),spinnerEmail(esEmail,!1),$icon.removeClass("fa-check"),$icon.addClass("fa-times"),$divContainer.removeClass("has-success"),$divContainer.addClass("has-danger"),emailVerificado.email&&!emailVerificado.valid?$("#popupSignupCorreoExiste").attr("style","visibility:visible;"):$("#signupPopupError"+idNum).attr("style","visibility: visible;"))},MDFormFeedbag=function(obj){var opcion=obj.opcion;if(1===opcion||3===opcion)var $icon=$("#feedbagIcon"+campoActual),$campo=$("#campo"+campoActual);switch(opcion){case 1:emailVerificado.valid=!1,$("#signupPopupError"+campoActual).attr("style","visibility:hidden;"),$(".popupSignupErrorServer").attr("style","visibility:hidden;"),spinnerEmail(!0,!1),$icon.removeClass("fa-check"),$icon.addClass("fa-times"),$campo.removeClass("has-success"),$campo.addClass("has-danger"),$("#popupSignupCorreoExiste").attr("style","visibility:visible;"),resetBoton(),console.log(obj.mensaje);break;case 2:var $campoEmail=$frmFormularioSignUp.find('[name="EMAIL"]');if("1"==$campoEmail.length){var $parentDiv=$campoEmail.closest("div");$parentDiv.addClass("has-danger"),$parentDiv.children(".fa").removeClass("fa-check"),$parentDiv.children(".fa").addClass("fa-times")}$(".popupSignupErrorServer").attr("style","visibility:visible;"),resetBoton(),console.log(obj.mensaje);break;case 3:emailVerificado.valid=!0,$("#popupSignupCorreoExiste").attr("style","visibility:hidden;"),$("#signupPopupError"+campoActual).attr("style","visibility:hidden;"),$(".popupSignupErrorServer").attr("style","visibility:hidden;"),spinnerEmail(!0,!1),$icon.removeClass("fa-times"),$icon.addClass("fa-check"),$campo.removeClass("has-danger"),$campo.addClass("has-success"),console.log(obj.mensaje);break;case 4:fn.btnSpin({mensaje:"Enviando...",t:botonID}),console.log(obj.mensaje);break;case 5:fn.btnSpin({mensaje:"Creando cuenta...",t:botonID}),console.log(obj.mensaje);break;case 6:var $campoEmail=$frmFormularioSignUp.find('[name="EMAIL"]');if("1"==$campoEmail.length){var $parentDiv=$campoEmail.closest("div");$parentDiv.addClass("has-danger"),$parentDiv.children(".fa").removeClass("fa-check"),$parentDiv.children(".fa").addClass("fa-times")}$(".popupSignupErrorServer").attr("style","visibility:visible;"),enviaCorreoErrorServer(obj.mensaje),resetBoton()}},enviaCorreoErrorServer=function(errMsg){if(0===enviandoCorreo&&0===correoEnviado){enviandoCorreo=1;var objCreaDemo=JSON.parse(localStorage.datosDemoP1),datosForm=qryString({Formulario:$frmFormularioSignUp,fn:"obj"}),cuerpo="<div>Demo incompleta por error de servidor<br><br>";cuerpo+="<b>Nombre: </b>"+fn.html_encode(unescape(objCreaDemo.nombre))+"<br><br>",cuerpo+="<b>Correo: </b>"+objCreaDemo.email+"<br><br>",cuerpo+="<b>Telefono: </b>"+datosForm.TELEFONO+"<br><br>",cuerpo+="<b>Empresa: </b>"+fn.html_encode(unescape(datosForm.EMPRESA))+"<br><br>",cuerpo+="<b>Vendedores: </b>"+unescape(datosForm.numColaboradores)+"<br><br>",cuerpo+="<b>Puesto: </b>"+fn.html_encode(unescape(datosForm.PUESTO))+"<br><br>",cuerpo+="<b>Pais: </b>"+fn.html_encode(datosForm.PAIS)+"<br><br>",cuerpo+="<b>Estado: </b>"+fn.html_encode(unescape(datosForm.ESTADO))+"<br><br>",cuerpo+="<b>Creo en: </b>"+localStorage.creoEn+"<br><br>",cuerpo+="********* DATOS DE ERROR *********<br><br>",cuerpo+="<b>ErrorThrown: </b>"+errMsg.errorThrown+"<br><br>",cuerpo+="<b>TextStatus: </b>"+errMsg.textStatus+"<br><br>",cuerpo+="<b>Status: </b>"+errMsg.xhr.status+"<br></div>",fn.enviaCorreo(correoEjecutivoErrorDemo,asuntoCorreoErrorDemo,cuerpo).done(function(res){'[{"code":0,"msg":"ok"}]'!=res?enviandoCorreo=0:correoEnviado=1}).fail(function(res){enviandoCorreo=0})}},numVendedores=function(vendedores){var numVend="";switch(vendedores){case"Aut%F3nomo":numVend="0";break;case"1%20vendedor":numVend="1";break;case"2-3%20vendedores":numVend="3";break;case"4-9%20vendedores":numVend="9";break;case"10-39%20vendedores":numVend="39";break;case"40-100%20vendedores":numVend="100";break;case"M%E1s%20de%20100%20vendedores":numVend="101"}return numVend},crearProspecto=function(){var guardarProspecto=function(){var nombre=""!=nombrePersona?encodeURIComponent(nombrePersona):"",apellido=""!=apellidoPersona?encodeURIComponent(apellidoPersona):"",camposAdd=infoCamposAdicionales(),contrasenia=encodeURIComponent($frmFormularioSignUp.find('[name="CONTRASENIA"]').val()),datos=qryString({Formulario:$frmFormularioSignUp,fn:"str"}),datosRegistro=datosCrearDemo({Formulario:$frmFormularioSignUp,info:{distribuidor:!0,vendedores:!0}}),strPruebaloGratis="c="+email+"&n="+nombre+"&a="+apellido+datosRegistro+camposAdd;funcionesDemo.guardaTipoCorreo(email),localStorage.setItem("datosDemoP1",JSON.stringify({email:email,nombre:nombre,apellido:apellido,contrasenia:contrasenia,datosRegistro:datos})),sessionStorage.getItem(demoConfig)&&sessionStorage.removeItem(demoConfig);try{dConf&&sessionStorage.setItem(demoConfig,JSON.stringify(dConf))}catch(err){console.log(err)}funcionesDemo.crearProspecto11811({strPruebaloGratis:strPruebaloGratis,callbackFeedbag:MDFormFeedbag,callback:function(res,err){if(err)return MDFormFeedbag({opcion:2,mensaje:"P1"}),null;localStorage.setItem("registrado","1"),document.location.href="/app"}})},email=$frmFormularioSignUp.find('[name="EMAIL"]').val();funcionesDemo.existeUsuario({email:email,callback:guardarProspecto,callbackFeedbag:MDFormFeedbag})},crearCuentaDemo=function(){var objCreaDemo=JSON.parse(localStorage.datosDemoP1);camposAdicionales=infoCamposAdicionales(),despachaProspecto(),objCreaDemo.datosRegistro+=datosCrearDemo({Formulario:$frmFormularioSignUp,datosForm:!0}),objCreaDemo.datosRegistro+=etiquetasParaDemo(),objCreaDemo.datosRegistro+=asignaEjecutivo(),objCreaDemo.referido="",objCreaDemo.callbackFeedbag=MDFormFeedbag,funcionesDemo.crearDemo(objCreaDemo),"https://www.salesup.com/software-crm-de-ventas.shtml"==localStorage.creoEn?enviaCorreoEjecutivoBuenFin(objCreaDemo.nombre,objCreaDemo.email):enviaCorreoEjecutivo(objCreaDemo.nombre,objCreaDemo.email)},etiquetasParaDemo=function(){var etiquetas="";if(sessionStorage.getItem(demoConfig)){var dConf=JSON.parse(sessionStorage.getItem(demoConfig));dConf.etiqueta1&&(etiquetas+="&ETIQUETA1="+dConf.etiqueta1),dConf.etiqueta2&&(etiquetas+="&ETIQUETA2="+dConf.etiqueta2),dConf.etiqueta3&&(etiquetas+="&ETIQUETA3="+dConf.etiqueta3)}return etiquetas},asignaEjecutivo=function(){var colabs=$('[name="numVendedores"]').val(),paramIdEjectutivo="";if(sessionStorage.getItem(demoConfig)){var dConf=JSON.parse(sessionStorage.getItem(demoConfig));dConf.idEjecutivo&&(paramIdEjectutivo="&idEjecutivo="+dConf.idEjecutivo)}return comparaVendedores(colabs)&&(paramIdEjectutivo="&idEjecutivo="+idEjecutivo),paramIdEjectutivo},despachaProspecto=function(){var puesto=$frmFormularioSignUp.find('[name="PUESTO"]').val();switch(puesto){case"Director":case"Socio/Dueño":var numVen=$frmFormularioSignUp.find('[name="numVendedores"]').val(),tipoEmail=localStorage.emailT,vendedores=0;switch(numVen){case"Autónomo":case"1 vendedor":case"2-3 vendedores":vendedores=0;break;case"4-9 vendedores":vendedores=1;break;case"10-39 vendedores":vendedores=2;break;case"40-100 vendedores":case"Más de 100 vendedores":vendedores=3}switch(!0){case"1"===tipoEmail&&0===vendedores&&"Director"===puesto:localStorage.setItem("Dir","1");break;case"1"===tipoEmail&&1===vendedores&&"Director"===puesto:localStorage.setItem("Dir","2");break;case"1"===tipoEmail&&2===vendedores&&"Director"===puesto:localStorage.setItem("Dir","3");break;case"1"===tipoEmail&&3===vendedores&&"Director"===puesto:localStorage.setItem("Dir","4");break;case"0"===tipoEmail&&0===vendedores&&"Director"===puesto:localStorage.setItem("Dir","5");break;case"0"===tipoEmail&&1===vendedores&&"Director"===puesto:localStorage.setItem("Dir","6");break;case"0"===tipoEmail&&2===vendedores&&"Director"===puesto:localStorage.setItem("Dir","7");break;case"0"===tipoEmail&&3===vendedores&&"Director"===puesto:localStorage.setItem("Dir","8");break;case"1"===tipoEmail&&0===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","9");break;case"1"===tipoEmail&&1===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","10");break;case"1"===tipoEmail&&2===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","11");break;case"1"===tipoEmail&&3===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","12");break;case"0"===tipoEmail&&0===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","13");break;case"0"===tipoEmail&&1===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","14");break;case"0"===tipoEmail&&2===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","15");break;case"0"===tipoEmail&&3===vendedores&&"Socio/Dueño"===puesto:localStorage.setItem("Dir","16")}break;case"IT Sistemas":localStorage.setItem("Dir","17");break;case"Asistente/Auxiliar":localStorage.setItem("Dir","18");break;case"Ejecutivo de Ventas":case"Estudiante":case"Otro":localStorage.setItem("Dir","19");break;case"Marketing":localStorage.setItem("Dir","20");break;case"Coordinador/Supervisor":case"Coach/Consultor":case"Gerente":localStorage.setItem("Dir","21");break;case"Contador":localStorage.setItem("Dir","22")}};this.ini=function(obj){objFormulario=obj.objFormulario;var ubicacion=window.location.pathname,$p2Append=$("#"+objFormulario.p2Append);switch(ubicacion){case"/pruebalo-signup.shtml":case"/pruebalo-signup-crm.shtml":append="#"+objFormulario.p2Append,objFormulario.paso1Fijo=!0,objFormulario.paso2=!0;break;case"/app/":case"/app/index.shtml":case"/app/index-crm.shtml":if(localStorage.datosDemoP1){var datosUsuario=JSON.parse(localStorage.datosDemoP1);objFormulario.nombreUsuario=decodeURIComponent(datosUsuario.nombre),objFormulario.apellidoUsuario=decodeURIComponent(datosUsuario.apellido)}append="#2pasoPaisEstado",objFormulario.paso2=!0,objFormulario.boton.text="Comenzar",paso2=objFormulario.paso2;break;default:if($p2Append.length)if(1===$p2Append.length&&"1"===localStorage.registrado){var datosUsuario=JSON.parse(localStorage.datosDemoP1);objFormulario.nombreUsuario=decodeURIComponent(datosUsuario.nombre),objFormulario.apellidoUsuario=decodeURIComponent(datosUsuario.apellido),objFormulario.paso2=!0,objFormulario.boton.text="Comenzar",paso2=objFormulario.paso2,append="#"+objFormulario.p2Append}else 1!==$p2Append.length||localStorage.registrado||(objFormulario.paso2=!0,objFormulario.boton.text="Comenzar",paso2=objFormulario.paso2,append="#"+objFormulario.p2Append);else{var $soloFormAppend=$("#soloForm");append=1===$soloFormAppend.length?"#soloForm":objFormulario.p1Append}}switch(append){case"#soloForm":template="2PasosSoloForm";break;case"#2pasoProgBar":template="popupCreaDemo2PasosProgBar";break;case"#2pasoPaisEstado":template="popupCreaDemo2PasosEstado";break;default:template="popupCreaDemo2Pasos"}fn.cargaTemplate({link:"/componentes/pruebaloDinamico/formTemplate.html",callback:cargaTemplate})},this.ObtenerPaises=function(){var jsonControl=SalesUp.Sistema.CargaDatos({Link:"https://control.salesup.com.mx/webservices/jsonPaises.dbsp"}),htmlOpcion='{{#each jsonDatos}}<option value="{{IdPais}}">{{Pais}}</option>{{/each}}',Opciones=SalesUp.Sistema.ReemplazaDatos({Template:htmlOpcion,Datos:jsonControl});$('[name="PAIS"]').append(Opciones)},this.ObtenerEstados=function(Op){var jsonControl=SalesUp.Sistema.CargaDatos({Link:"https://control.salesup.com.mx/webservices/jsonEstados.dbsp",Parametros:"p="+Op.v});if("MX"!=Op.v)pais=Op.v,$('[name="ESTADO"]').hide().addClass("selectNoValue"),$('[name="ESTADO"] option:eq(1)').attr("selected","selected");else{$('[name="ESTADO"] option:eq(1)').removeAttr("selected"),pais=Op.v,jsonControl.jsonDatos=_.reject(jsonControl.jsonDatos,function(j){return 0==_.size(j)}),$('[name="ESTADO"]').html(""),_.size(jsonControl.jsonDatos)>1&&$('[name="ESTADO"]').html('<option hidden="" value="0"></option>');var htmlOpcion='{{#each jsonDatos}}<option value="{{Estado}}">{{Estado}}</option>{{/each}}',Opciones=SalesUp.Sistema.ReemplazaDatos({Template:htmlOpcion,Datos:jsonControl});$('[name="ESTADO"]').append(Opciones),$('[name="ESTADO"]').show()}},this.guardaEstado=function(value){estado=value},this.lanzarPopup=function(){localStorage.removeItem("datosDemoP1"),localStorage.removeItem("registrado"),localStorage.datosDemoP1&&"1"===localStorage.registrado?$("#continuarUsuarioPopup").modal():$("#crea-demo-popup").modal()},this.selectNoValue=function(t,value){"-1"==value?$(t).addClass("selectNoValue"):$(t).removeClass("selectNoValue")},this.mostrarPassword=function(elemento){var $elemento=$(elemento),$input=$elemento.parent().children("input");$elemento.hasClass("fa-eye")?($input.attr("type","text"),$elemento.removeClass("fa-eye"),$elemento.addClass("fa-eye-slash")):$elemento.hasClass("fa-eye-slash")&&($input.attr("type","password"),$elemento.removeClass("fa-eye-slash"),$elemento.addClass("fa-eye"))},this.MDFormBotonClick=function(){fn.btnSpin({mensaje:"Validando",t:botonID}),!paso2||objFormulario.paso1Fijo?fnBoton({campos:objFormulario.camposVista1,fn:crearProspecto}):paso2&&fnBoton({campos:objFormulario.camposVista2,fn:crearCuentaDemo})},this.validaCampo=function(obj){function feedback(){MDFormFeedbagHandler(validacion?{valid:!0,id:id}:{valid:!1,id:id})}var $elemento=obj.id&&!obj.t?$(obj.id):$(obj.t),validaVacio=obj.validaVacio?obj.validaVacio:"1",inputTipo=$elemento.attr("data-tipo"),value=$elemento.val(),validacion=validaInput(inputTipo,value),id=obj.id?obj.id:$elemento.attr("id");if("1"==validaVacio?feedback():""!=value&&feedback(),obj.retornarResultado)return validacion},this.limpiarInput=function(obj){var $elemento=$("#"+obj.t.id),regEx=/[0-9]+/g,idNum=regEx.exec($elemento.attr("id")),$icon=$("#feedbagIcon"+idNum),$divContainer=$elemento.closest("div");"email"==$elemento.attr("data-tipo")&&($(".popupSignupErrorServer").attr("style","visibility:hidden;"),$("#popupSignupCorreoExiste").attr("style","visibility:hidden;")),$("#signupPopupError"+idNum).attr("style",""),$icon.removeClass("fa-times"),$divContainer.removeClass("has-danger"),$icon.removeClass("fa-check"),$divContainer.removeClass("has-success")};var spinnerEmail=function(esEmail,colocar){esEmail&&(colocar?$("#popupSignupEmailSpinner").attr("style","visibility: visible;"):$("#popupSignupEmailSpinner").attr("style","visibility: hidden;"))}};if(objPopupSignup){var popupSignup=new SignupMaterial2Pasos;!function(){popupSignup.ini({objFormulario:objPopupSignup})}()}var extras={regExSalesUp:/www.salesup.com/,regExLocalhost:/localhost/,regExPathsExcluded:/\/app\/|pruebalo-signup-done/,domain:document.domain,pathname:document.location.pathname,href:document.location.href,enApp:function(){return this.domain,!this.regExPathsExcluded.test(this.pathname)},landing:function(){var vinoDe=document.referrer,vinoAfuera=!this.regExSalesUp.test(vinoDe);if("localhost"===this.domain&&(vinoAfuera=!this.regExLocalhost.test(vinoDe)),vinoAfuera){if(""===vinoDe?localStorage.setItem("vinoDe","www.salesup.com"):localStorage.setItem("vinoDe",vinoDe),localStorage.sesiones){if(1!=performance.navigation.type){var sesiones=parseInt(localStorage.sesiones)+1;localStorage.setItem("sesiones",sesiones)}}else localStorage.setItem("sesiones","1");this.enApp()&&localStorage.setItem("llegoA",this.href)}},creoEn:function(){this.enApp()&&localStorage.setItem("creoEn",this.href)},idRef:function(){var pideDatosRef=function(){fn.request("https://apifans.salesup.com:4431/referido/"+idRef+"/fan").done(function(res){localStorage.setItem("dtRef",JSON.stringify(res[0]))}).fail(function(err){console.log(err)})},idRef=fn.getParameter({name:"idRef",url:document.location.href}),pathName=document.location.pathname,pathNameExist="/descubre-crm-ventas.shtml"===pathName;if(idRef?(localStorage.setItem("idRef",idRef),pideDatosRef()):localStorage.idRef&&!localStorage.dtRef&&pideDatosRef(),idRef&&pathNameExist){var url="https://apifans.salesup.com:4431/referido/"+idRef+"/confirmacion";fn.putReq(url,{accion:2}).done(function(res){console.log("ok")}).fail(function(err){console.log(err)})}}};!function(){extras.landing(),extras.creoEn(),extras.idRef()}();var FnLead=function(){var lead={IDEMPRESA:"11811",IDUSUARIO:"64211",IDORIGEN:"",NOMBRE:"",APELLIDOS:"",TELEFONO:"",CORREO:"",PUESTO:"",EMPRESA:"",COMENTARIOS:"",IDETIQUETA:"",IDETIQUETA1:"",IDETIQUETA2:"",SP_VERSION:"2"};this.setDatosLead=function(obj){obj.idEmpresa&&(lead.IDEMPRESA=obj.idEmpresa),obj.idUsuario&&("0"==obj.idUsuario?lead.IDUSUARIO="":lead.IDUSUARIO=obj.idUsuario),obj.origen&&(lead.IDORIGEN=obj.origen),obj.nombre&&(lead.NOMBRE=obj.nombre),obj.apellidos&&(lead.APELLIDOS=obj.apellidos),obj.telefono&&(lead.TELEFONO=obj.telefono),obj.correo&&(lead.CORREO=obj.correo),obj.puesto&&(lead.PUESTO=obj.puesto),obj.empresa&&(lead.EMPRESA=obj.empresa),obj.comentarios&&(lead.COMENTARIOS=obj.comentarios),obj.etiqueta&&(lead.IDETIQUETA=obj.etiqueta),obj.etiqueta1&&(lead.IDETIQUETA1=obj.etiqueta1),obj.etiqueta2&&(lead.IDETIQUETA2=obj.etiqueta2)},this.verDatos=function(callback){console.log("objeto Lead: ",lead),console.log("Se envian los datos"),callback()},this.primeraMayus=function(string){return string&&"string"==typeof string?(string=string.toLowerCase(),string[0].toUpperCase()+string.slice(1)):""},this.separaNombres=function(nombre){var nombres=nombres.trim();if(nombres=nombres.split(" "),configLead.nombre=nombres[0],configLead.nombre=primeraMayus(nombrePersona),nombres[1])for(var i=1;i<nombres.length;i++)i==nombres.length-1?configLead.apellido+=primeraMayus(nombres[i]):configLead.apellido+=primeraMayus(nombres[i])+" "},this.WSseparaNombres=function(obj){SalesUp.Sistema.CargaDatosAsync({link:"https://control.salesup.com.mx/webservices/jsonNombreyApellidos.dbsp",parametros:"nombreCompleto="+obj.nombre,callback:obj.callback})},this.WSguardaProspecto=function(callback){$.ajax({method:"POST",url:"https://socrates.salesup.com.mx/guarda_prospecto.dbsp",data:lead}).done(function(res){callback(res,null)}).fail(function(err,textStatus){callback(null,err)})},this.validaCampo=function(obj){switch(obj.tipo){case"nombre":return validar.validaNombre(obj.valor);case"email":return validar.validaCorreo(obj.valor);case"telefono":return validar.validaNumeroTelefono(obj.valor);case"select":case"texto":return obj.valor.length>0;default:return!1}}},fnLead=new FnLead,RelForm=function(){var propsArr=["nombre","correo","puesto","telefono","empresa","numVendedores"],nombreCampos=["NOMBRE","EMAIL","PUESTO","TELEFONO","EMPRESA","numVendedores"],nombreCamposDesc=["nombre","email","puesto","telefono","compania","numVendedores"],llenaCamposForm=function($form,datos,nameArr){for(var i=0;i<nameArr.length;i++){var dato=propsArr[i];if(dato)if("puesto"===dato||"numVendedores"===dato){var $select=$('select[name="'+nameArr[i]+'"]');$select.length&&($select.val(datos[propsArr[i]]),$select.removeClass("selectNoValue"))}else{var $input=$form.find('input[name="'+nameArr[i]+'"]');$input.length&&$input.val(datos[propsArr[i]])}}};this.rellena=function(){if(!localStorage.rellenaOff){var datos={},$leadForm=$("#leadForm"),$demoForm=$("#popupFormSignUp"),$descForm=$("#frmDescargarFormato");localStorage.leadDt&&(datos=JSON.parse(localStorage.leadDt),$leadForm.length&&llenaCamposForm($leadForm,datos,nombreCampos),$demoForm.length&&llenaCamposForm($demoForm,datos,nombreCampos),$descForm.length&&llenaCamposForm($descForm,datos,nombreCamposDesc))}}},relForm=new RelForm;setTimeout(function(){relForm.rellena()},700);